<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>CorText Graphs</title>
    <meta name="description" content="Welcome to CorTexT Graphs, part of the digital plateform CorText of IFRIS (Institut Francilien Recherche, Innovation, Soci&#233;t&#233;)" />
    <meta name="viewport" content="width=device-width"/>
    <meta name="robots" content="noindex, nofollow" />
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
</head>
  
<body>
    {{> navbar}}
    <div class="container-fluid" id='main-container'>
        <div class="row-fluid">
            <div id="sigma" class="span8">
            </div>
            <div id="sidebar" class="span4">
                <div id='currentnode'>
                </div>
                <div id='noteedit'>
                </div>
                <div id='notelist'>
                </div>
                <div id='nodelist'>
                </div>
            </div>
        </div>
    </div>

</body>
<template name='navbar'>
    <div id="navbar" class="navbar navbar-fixed-top">
        <div class="container-fluid" id="navbar-fluid">
          <a class="brand" id="go-home" href="/#open/hnetwork-low.json/hnetwork-high.json?node=null">
              <img src='logo-cortext.png'/>
          </a>
          <ul class="nav pull-right" id="navbar-right"> 
            <li>
              <a id="nav-nodes" class="primary-nav">
              <span>nodes</span>
              </a>
              <a id="nav-list_nodes" class="second-nav">
              list
              </a>
              <a id="nav-info_nodes" class="second-nav">
              view
              </a>
            </li>
            <li id="notes-nav">
              <a id="nav-notes" class="primary-nav">
              <span>notes</span>
              </a>
              <a id="nav-list_notes" class="second-nav">
              list
              </a>
              <a id="nav-info_notes" class="second-nav">
              edit
              </a>
            </li>   
         </ul>
        </div>
    </div>
</template>
<!-- hello template -->
<template name="hello">
    <div class="hero-unit welcome">
        <div>
            <h1>
                {{{ text }}}
            </h1>
            <p>
            </p>
        </div>
        {{#if example}}
        <a class="btn btn-primary" href="#open/hnetwork-low.json/hnetwork-high.json?node=null">
            Load example Â»
        </a>
        {{/if}}
    </div>
    <div id="footer" class="row-fluid">
        <div>
            <p class="muted credit"><a href="https://github.com/cortext/cortext-graphs/">Cortext Graphs</a> is a <a href="http://www.gnu.org/licenses/agpl-3.0.html">Free Software</a> made by <a href="http://www.cortext.net/">Cortext research team at IFRIS Universit&eacute; Paris-Est</a></p>
        </div>
    </div>
</template>

<!-- node view pannel -->
<template name="nodepanel">
{{#if cluster}}
<div class="nav row-fluid">
    <div class="span12">
        <h4 class="title-cluster">cluster</h4>
        <div class="row-fluid">
                            <span class="span6 offset7 cluster-update"><small>{{ cluster.attr.last_update }}</small></span>
            <div class="span10">
                <span class='cluster node-hover' data-id='{{ cluster.id }}'></span>
            </div>
            <div class="span2">
                {{ cluster.attr.weight }} <span class="span2b">articles</span>
            </div>                    
            <div class="link-annot"><a href="#">edit cluster label</a></div>
        </div>
        
    </div>
</div>
{{/if}}
{{#if node}}
    <div class="title-node">
        <h4 class="current-node">node</h4>
        <div class="row-fluid">
            <h3 class='page-header node-hover' data-id='{{ node.id }}'>
                <div class="btn-group">
                            <button title="annotate {{node.label}}" class="node-add-note" data-neighbor-add-note-target='{{this.id}}' data-neighbor-add-note-source='{{node.id}}'>
                            </button>
                </div>
                {{ node.label }}
                {{#if node.attr}}
                <span class='pull-right'>
                    <span class="badge" style='background-color:{{ cluster.color }};'>&nbsp;</span>
                    {{ node.attr.weight }}
                </span> 
                <div class="link-annot"><a href="#">view annotations</a></div>
                {{/if}}
            </h3>
        </div>
    </div>
    {{#if neighbors}}
    <ul class="nav nav-list neighbor-list"><!--nav nav-list well-->
        <h4 class="neighbour-node">neighbour nodes</h4>
       {{#each neighbors}}
        <li class='hide neighbor'>
            <a class='node-hover neighbor-switch' data-id='{{ this.id }}' data-neighbor-switch='{{this.id}}'>
            <div class='row-fluid'> 
                <div class='span3'>
                    <div class="btn-group">
                        <button title="annotate the link to {{this.label}}" class="neighbor-add-note" data-neighbor-add-note-target='{{this.id}}' data-neighbor-add-note-source='{{node.id}}'>
                        </button>
                    </div>
                </div>
                <div class="span-label">
                    {{this.label}}
                </div>
                <div class='span3 span-badge'>
                    <span class="badge" style='background-color:{{ this.attr.clusterColor }}'>&nbsp;
                    </span>
                    {{ this.attr.weight }}
                </div>
                </div>
            </a>
        </li>
        {{/each}}
        <div class="pagination">
            <ul class='neighbor-pages'></ul>
        </div>
    </ul>
    {{/if}}
{{/if}}
</template>

<!-- note edit panel -->
<template name='noteedit'> 
{{#if cluster}}
    <div class="nav row-fluid">
        <div class="span12">
            <h4 class="title-cluster">cluster</h4>
            <div class="row-fluid">
                                <span class="span6 offset7 cluster-update"><small>{{ cluster.attr.last_update }}</small></span>
                <div class="span10">
                    <span class='cluster node-hover' data-id='{{ cluster.id }}'></span>
                </div>
                <div class="span2">
                    {{ cluster.attr.weight }} <span class="span2b">articles</span>
                </div>                    
                <div class="link-annot"><a href="#">change the label cluster</a></div>
            </div>
            
        </div>
    </div>
{{/if}}
{{#if node}}
    <div class="title-node">
        <h4 class="current-node">node</h4>
        <div class="row-fluid">
            <h3 class='page-header node-hover' data-id='{{ node.id }}'>{{ node.label }}
                {{#if node.attr}}
                <span class='pull-right'>
                    <span class="badge" style='background-color:{{ cluster.color }};'>&nbsp;</span>
                    {{ node.attr.weight }}
                </span> 
                <div class="link-annot"><a href="#">annotate the node</a></div>
                {{/if}}
            </h3>
        </div>
    </div>
{{/if}}
   <div id="currentNodeNotes">
        <h4 class="annot-node">annotations  <span>{{notes.length}}</span></h4>
        {{#if notes}} 
        <ul class="nav note-list">
            <div class='clear'></div>
             
            {{#each notes}}
            <li class='hide note'>
            <a title='by {{this.created_by}}' class='node-hover' data-id='{{ this.source }}{{#if this.target}},{{ this.target }}{{/if}}'>
                <div class='row-fluid'>
                    <div class='span-title'>
                    {{ this.text }}
                    </div>
                    <div class='span3 span-note'>
                    {{#if this.icon}}
                       
                        <i class="{{this.icon}}"></i>
                        <!-- <i class="icon-asterisk"></i><i class="">
                            {{#if this.targetlabel}}
                                {{this.targetlabel}}
                            {{/if}}
                        </i>-->
                    {{/if}}
                    </div>
                    </div>
                </a>
            </li>
            {{/each}}
            <div class="pagination">
                <ul class='note-pages'></ul>
            </div>
        </ul>
        {{/if}}
        <h4 class="annot-node">annotate</h4>

         <ul class="nav">
            <li>
                <a class='new-note'></a>
            </li>
        </ul>
   </div> 
</template>

<!-- note list panel -->
<template name='notelist'>
    {{#if notes}}  
   <div class="count"><span>{{notes.length}} notes </span></div>   
    <ul class="nav note-list lastnote">

        {{#each notes}}
        <li class='hide note'>
            <a title='by {{this.created_by}}' class='node-hover' data-id='{{ this.source }}{{#if this.target}},{{ this.target }}{{/if}}'> 
            <div class='row-fluid'>
                <div class='span-title-lastnote'>
                {{ this.text }} 
                </div>
                                            
                <div id="last">
                <span class='pull-right'>
                <i class="{{this.icon}}"> </i>
                    {{#if this.icon}}
                    {{this.sourcelabel}}
                    {{else}} 
<!--                    <i class="{{this.nodeicon}}"></i>
-->                       {{this.sourcelabel}}
                    {{/if}} &nbsp;&nbsp;               
                    <span class="badge" style='background-color:{{ this.nodecolor }};'>&nbsp;</span>

                </span>  
                </div>
                 
            </div>
            </a>
        </li>
        {{/each}}
        <div class="pagination">
            <ul class='note-pages'></ul>
        </div>
    </ul>
    {{/if}}
</template>

<!-- node list panel -->
<template name="nodelist">

        <div class="count"><span>{{nodes.length}} nodes </span></div>   
        {{#each nodes}}
        <div class="title-node" data-id='{{ this.id }}'>
                <h2 class='titlenode node node-hover'  data-id='{{ this.id }}' data-neighbor-switch='{{ this.id }}'>            
                 <span class="badge" style='background-color:{{ this.color }};'>&nbsp;</span>
                <span>{{ this.label }}</span> <span class="nbr-notes"><span class="number-notes">{{this.noteCount}}</span></span>               
                </h2>
        </div>
        {{/each}}
</template>